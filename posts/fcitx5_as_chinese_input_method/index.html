<!doctype html><html><head><title>Fcitx5 as Chinese Input Method</title><meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta name=google-site-verification content><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><meta content="telephone=no" name=format-detection><meta name=description content="Fcitx is a lightweight input method framework aimed at providing environment independent language support for Linux."><meta name=renderer content="webkit"><meta name=theme-color content="#ffffff"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-71962122-1','auto');ga('send','pageview');}</script><script src=/vendor/js/jquery.min.js></script><script src=/vendor/js/popper.min.js></script><script src=/vendor/js/bootstrap.min.js></script><script src=/vendor/js/smooth-scroll.polyfills.min.js></script><link type=text/css rel=stylesheet href=/vendor/css/bootstrap.min.css><script src=/vendor/js/vue.min.js></script><link rel=icon href=favicon-96x96.png><link rel=stylesheet href=//blog.yech.xyz/scss/journal.min.5c667e74038e21ddbb9024b67930f8544e02af62491281cf73fdb817eec2947e.css integrity="sha256-XGZ+dAOOId27kCS2eTD4VE4Cr2JJEoHPc/24F+7ClH4=" media=screen><script src=//blog.yech.xyz//js/loadCSS.js></script><script src=//blog.yech.xyz//js/table.js></script><script src=//blog.yech.xyz//js/toc.js></script><script>loadCSS("https://fonts.googleapis.com/css?family=Lora|Montserrat|Fira+Mono|Noto+Serif+SC|Material+Icons");</script></head><body><div id=app><div ref=sideContainer class=side-container><a class="a-block nav-head false" href=//blog.yech.xyz/><div class=nav-title>Chang's blog</div><div class=nav-subtitle>learn and share...</div></a><div class=nav-link-list><a class="a-block nav-link-item false" href=/categories>Categories</a>
<a class="a-block nav-link-item false" href=/tags>Tags</a></div><div class=nav-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://amazingrise.net>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
2020 by Ye Chang</div></div><div ref=extraContainer class=extra-container><div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }"></div><div class=pagination><a id=globalBackToTop class="pagination-action animated-visibility" href=#top :class="{ invisible: scrollY == 0 }"><i class="material-icons pagination-action-icon">keyboard_arrow_up</i></a></div></div><div class=single-column-drawer-container ref=drawer v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }"><div class=drawer-content><div class=drawer-menu><a class="a-block drawer-menu-item false" href=/categories>Categories</a>
<a class="a-block drawer-menu-item false" href=/tags>Tags</a><div class=toc></div></div></div></div><transition name=fade><div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if=isDrawerOpen v-on:click=toggleDrawer></div></transition><nav ref=navBar class="navbar sticky-top navbar-light single-column-nav-container"><div ref=navBackground class=nav-background></div><div class="container container-narrow nav-content"><button id=nav_dropdown_btn class=nav-dropdown-toggle type=button v-on:click=toggleDrawer>
<i class=material-icons>menu</i></button>
<a ref=navTitle class=navbar-brand href=//blog.yech.xyz/>Chang's blog</a></div></nav><div class=single-column-header-container ref=pageHead v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href=//blog.yech.xyz/><div class=single-column-header-title>Chang's blog</div><div class=single-column-header-subtitle>learn and share...</div></a></div><div id=content><div ref=streamContainer class=stream-container><div class="post-list-container post-list-container-shadow"><div class=post><div class=post-head-wrapper style=background-image:url(/img/fcitx5_input_method.png)><div class=post-title>Fcitx5 as Chinese Input Method<div class=post-subtitle>Fcitx is a lightweight input method framework aimed at providing environment independent language support for Linux.</div><div class=post-meta><time itemprop=datePublished>2020-02-06 17:13</time>
<i class=material-icons>folder</i>
<a href=/categories/coding>coding</a>
&nbsp;
<i class=material-icons>label</i>
<a href=/tags/chinese>chinese</a>
&nbsp;
<a href=/tags/linux>linux</a>
&nbsp;
<a href=/tags/archlinux>archlinux</a>
&nbsp;</div></div></div><div class=post-body-wrapper><div class=post-body><blockquote><p>安装 Archlinux 最后一件事往往是安装搜狗输入法，这也是最困难的一件事。</p><ul><li>从 AUR 编译源码需要花费大量的时间（<em>低配置的 Laptop 上需要半天</em>）。</li><li>为了兼容 QT4, QT5, GTK4, GTK5, XIM 等框架的应用，需要各种调试。</li><li>搜狗输入法带有 bug，经常无法调出输入法，或是输入皮肤不显示。</li></ul><p>这直到 fcitx5 发布，一切终于有了转机会。
若非进行大量的中文写作，fcitx5 中的拼音插件<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>完全可以胜任日常的中文输入。</p></blockquote><p>fcitx5 安装及配置步骤也非常简单，而且稳定性出奇的好。大致步骤如下：</p><ol><li><p><strong>安装 fcitx5</strong>：</p><p>从 AUR 安装<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>yay -S fcitx5-git fcitx5-qt5-git fcitx5-gtk-git fcitx5-chinese-addons-git
</code></pre></div><p>若配置了 ArchlinuxCN<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>，从 ArchlinuxCN 安装：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pacman -S fcitx5-git fcitx5-qt5-git fcitx5-gtk-git fcitx5-chinese-addons-git
</code></pre></div></li><li><p><strong>设置 fcitx5 的开启</strong>：</p><p>基于 Xorg 的桌面环境，添加配置到 ~/.xprofile：</p><pre><code>export GTK_IM_MODULE=fcitx5
export XMODIFIERS=&quot;@im=fcitx&quot;
export QT_IM_MODULE=fcitx5
fcitx5 &gt; /dev/null &amp;
</code></pre><p>基于 Wayland 的桌面环境，添加配置到 ~/.pam_environment：</p><pre><code>GTK_IM_MODULE DEFAULT=fcitx5
QT_IM_MODULE DEFAULT=fcitx5
XMODIFIERS DEFAULT=@im=fcitx5
</code></pre></li><li><p><strong>配置 fcitx5</strong>：</p><p>(<strong>配置时需要关闭 fcitx !!!</strong>)</p><ul><li>在 <code>~/.config/fcitx5/profile</code> 中添加：</li></ul><pre><code>[Groups/0]
# Group Name
Name=Default
# Layout
Default Layout=us
# Default Input Method
DefaultIM=pinyin

[Groups/0/Items/0]
# Name
Name=keyboard-us
# Layout
Layout=

[Groups/0/Items/1]
# Name
Name=pinyin
# Layout
Layout=

[GroupOrder]
0=Default
</code></pre><ul><li>下载主题<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>：</li></ul><pre><code>git clone https://github.com/weearc/fcitx5-skin-simple-blue.git ~/.local/share/fcitx5/themes/simple-blue
</code></pre><p><strong>开启 fcitx5 然后关闭，让其自动生成配置文件。</strong></p><ul><li>启用主题并设置字体：</li></ul><p>在 <code>~/.config/fcitx5/conf/classicui.conf</code> 中添加：</p><pre><code># True, if you want a vertical candidate list
Vertical Candidate List=False
# Use Per Screen DPI
PerScreenDPI=True
# Font for Chinese and English, then font size
Font=&quot;Noto Sans CJK SC Regular Noto Sans Regular 11&quot;
# Theme
Theme=simple-blue
</code></pre><p>其中，<code>Theme</code> 为下载的主题文件夹名称，<code>Font</code> 设置输入法的显示字体及字号。</p><ul><li>配置拼音输入法（针对 fcitx5-chinese-addons）：</li></ul><p>在 <code>~/.config/fcitx5/conf/pinyin.conf</code> 中修改，使得 <code>&lt;</code>, <code>></code> 键可以用于翻页：</p><pre><code>[PrevPage]
0=minus
1=Up
2=comma

[NextPage]
0=equal
1=Down
2=period
</code></pre><ul><li>配置拼音输入法中的云拼音输入法（同样针对 fcitx5-chinese-addons）：</li></ul><blockquote><p><strong>尝试了很多次才知道配置参数为 <code>Backend</code> 而不是 <code>CloudPinyinBackend</code>，被代码的命名误导了。配置文件是独立的文件，而不是放在 <code>pinyin.conf</code> 里面</strong></p></blockquote><p>在 <code>~/.config/fcitx5/conf/cloudpinyin.conf</code> 中修改云拼音的来源从 Google 修改为 Baidu。</p><pre><code># Minimum Pinyin Length
MinimumPinyinLength=4
# Backend
Backend=Baidu
</code></pre></li></ol><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>fcitx5 也获得了 <a href=https://github.com/fcitx/fcitx5-rime>Rime 输入法的插件</a>支持，功能更为强大，但配置也相对复杂，有悖于这个文章的初衷。 <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>yaourt 已经停止维护了，用 yay <a href=https://zhuanlan.zhihu.com/p/42287487>替代</a>。 <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3 role=doc-endnote><p>从 <a href=https://www.archlinuxcn.org/archlinux-cn-repo-and-mirror/>ArchlinuxCN</a> 下载预编译的安装包，可以省去编译的时间。 <a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4 role=doc-endnote><p>另外推荐两款皮肤：<a href=https://github.com/escape0707/fcitx5-adwaita-dark.git>adwaita-dark</a> 和 <a href=https://github.com/hosxy/Fcitx5-Material-Color.git>Material-Color</a>。 <a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section><hr width=100% id=EOF><p style=color:#777>Last modified on 2020-03-26</p></div></div><nav class=post-pagination><a class=newer-posts href=//blog.yech.xyz/posts/open_resource_for_2019-ncov/>Next<br>Open Resource for 2019-NCoV</a>
<a class=older-posts href=//blog.yech.xyz/posts/phylogenetic_analysis_for_2019-ncov/>Previous<br>Phylogenetic Analysis for 2019-NCoV</a></nav><div class=post-comment-wrapper></div></div></div></div></div><div id=single-column-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://amazingrise.net>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
2020 by Ye Chang</div></div><script src=//blog.yech.xyz//js/journal.js></script></body></html>