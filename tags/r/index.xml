<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>R on Chang's blog</title><link>//blog.yech.xyz/tags/r/</link><description>Recent content in R on Chang's blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>2020 by Ye Chang</copyright><lastBuildDate>Mon, 23 Mar 2020 22:38:14 +0800</lastBuildDate><atom:link href="//blog.yech.xyz/tags/r/index.xml" rel="self" type="application/rss+xml"/><item><title>Fix a Bug in Quickrun, a Vim Plugin</title><link>//blog.yech.xyz/posts/fix_a_bug_in_quickrun_vim_plugin/</link><pubDate>Mon, 23 Mar 2020 22:38:14 +0800</pubDate><guid>//blog.yech.xyz/posts/fix_a_bug_in_quickrun_vim_plugin/</guid><description>Quickrun1是一个整合了常用编程语言运行命令的 Vim Plugin，可以通过 :Quickrun 命令，或是自定义的映射，一键运行当前文件。
今天在 Vim 中运行一个 R 文件时，发现结果一直输出“file name is missing”。查看错误日志，却发现一切正常; 用各种关键词搜索这个输出信息，均未能找到有用的信息; 查看插件的源码，也没看到这个报错的出处。
这时只能从文件入手，把文件（test.R）删到只剩下一句命令：
#!/usr/bin/env Rscript # -*- coding: utf-8 -*- print(&amp;#39;hello&amp;#39;) 运行了一下，依然是相同的报错。 再次陷入了 “越是容易上手的东西，越不容易使用” 的魔咒。
无奈之下只好把文件头的注释也删了。 这时，惊奇地发现居然成功地看到了正常的输出。 也就是说是文件头（shebang）2间接地触发了报错。 但是 Quickrun 是根据根据文件类型来触发运行命令的，理论上不应该受到文件注释的影响。 唯一的解释是 Quickrun 中加入了对 shebang 的识别机制。
再次翻看源码和文档，终于发现其中 R 语言的运行命令为：%c %o --no-save --slave %a &amp;lt; %s。 默认情况下 %c 会被替换为 comand 参数中的设定值，即 R。 但是在识别到 shebang 的时候，会将 %c（小写字母）替换为 %C（大些字母），而 %C 对应的是 shebang 中设定值，即 Rscript。 正常情况下，当前文件 %s 会被逐行输出（&amp;lt;）为 R 命令的标准输入，R 命令支持命令行模式。 但是 Rscript 命令只支持文件名作为输入参数，因此触发了报错。诡异的报错信息就是简单粗暴的 &amp;lsquo;file name is missing&amp;rsquo;（R 相关的设计一直都很随意，大多数的文档和报错信息都云里雾里的。）。 可以测试这个例子：</description></item><item><title>在R语言中使用并行</title><link>//blog.yech.xyz/posts/paralle_in_r/</link><pubDate>Wed, 31 Jan 2018 00:11:14 +0800</pubDate><guid>//blog.yech.xyz/posts/paralle_in_r/</guid><description>&lt;p>R 语言天生具有数据框处理的优势，这种优势掩盖了 R 中循环体的劣势，这间接导致了 R 并行难度大，各种包良莠不齐。&lt;/p></description></item><item><title>Beckman流式细胞仪数据lmd格式转fcs格式</title><link>//blog.yech.xyz/posts/flow_cytometry_lmd2fcs/</link><pubDate>Mon, 28 Dec 2015 19:26:56 +0800</pubDate><guid>//blog.yech.xyz/posts/flow_cytometry_lmd2fcs/</guid><description>&lt;p>借助 R 语言包&lt;code>flowcore&lt;/code>，将 Beckman 流式细胞仪数据从 lmd 格式转 fcs 格式，进而能被下游的工具读取。&lt;/p></description></item></channel></rss>